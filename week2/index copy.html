<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FetchAPI_example</title>
</head>

<body>
    <header>
        <h1>FetchAPI_example</h1>
        <h3>Start Here</h3>
        <button id="fetch-button">Fetch data</button>
    </header>
    <main id="main-content">
    </main>
    <script>
        const triggerButton = document.getElementById('fetch-button')
        const animalButton = document.getElementById('fetchAnimal')



        const mainContent = document.getElementById('main-content')


        const fetchAnimalData = () => {
            const APIkey = "GgxWnTogBneqSrOtHaDzNA==xL0RFHpq9g4TpGNF"
            let animalName = document.getElementById('animalText').value
            fetch('https://api.api-ninjas.com/=/v1/animals?name='+ elephant , {
                method: 'GET',
                headers: {
                    'X-Api-Key': APIkey
                }
            })

                .then(response => response.json())
                .then((data) => {
                    console.log(data)
                    let animal = data[0]
                    let animalHTML = `
                    <h2>${animal.name}</h2>
                    <p>${animal.characteristics.slogan ? animal.characteristics.slogan : 'No slogan available'}</p>
                    <p>Habitat:&{animal.characterstics.habitat?animal.characterestics.habitat: 'No habitat information available'}</p>
                    `
                    mainContent.innerHTML +=animalHTML
                })

        }


        const fetchCocktailData = () => {
            fetch('https://www.thecocktaildb.com/api/json/v1/1/random.php')
                .then(response => response.json())
                .then((data) => appendDrinkData(data))
        }

        const fetchNASAData = (requestDate) => {
            fetch('https://api.nasa.gov/planetary/apod?api_key=tQsmfNCAbodGmRGYaDB3TggLhbVwqn5qF7ofc8QE&date=' + requestDate)
                .then(response => response.json())
                .then((data) => appendNasaData(data))

        }

        const appendDrinkData = (data, logData = true) => {
            if (logData) console.log(data)
            let drinkData = data.drinks[0]
            if (logData) console.log(drinkData)

            let drinkName = drinkData.strDrink
            let drinkInstructions = drinkData.strInstructions
            let drinkIMG = drinkData.strDrinkThumb


            let drinkHTML = `
                <h2>${drinkName}</h2>
                <img src="${drinkIMG}" alt="${drinkName}"/>
                <p>${drinkInstructions}</p>
            `
            mainContent.innerHTML = drinkHTML
            //console.log(new Date(drinkData.dateModified))

            const drinkDate = new Date(drinkData.dateModified)
            const year = drinkDate.getFullYear()
            const month = drinkDate.getMonth() + 1
            const day = drinkDate.getDate()
            const nasaDate = year + '-' + (month < 10 ? '0' + month : month) + '-' + (day < 10 ? '0' + day : day)
            console.log(nasaDate)
            fetchNASAData(nasaDate)

        }

        const appendNasaData = (data) => {
            console.log(data)
            let nasaTitle = data.nasaTitle
            let nasaAuthor = data.coyright ? data.copyright : 'Public Domain'
            let nasaImage = data.hdurl
            //let nasaInstructions = appendNasaData.strInstructions

            let nasaHTML = `
                <h2>${nasaTitle}</h2>
                <h4>by ${nasaAuthor}</h4>
                <img src="${nasaImage}" alt="${nasaTitle}"/>
                
             `
            mainContent.innerHTML += nasaHTML


        }


        triggerButton.addEventListener('click', fetchCocktailData)
        animalButton.addEventListener('click', fetchAnimalData)

    </script>

</body>

</html>